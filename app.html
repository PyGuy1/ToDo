<!doctype html>
<html lang="en">

<head>
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#000000">
    <meta charset="utf-8" />
    <link rel="icon" href="./ToDo.png" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="description" content="A clean, intuitive web app that helps you create, organize, and track your daily tasks efficiently, keeping your to-do list simple, focused, and always up to date." />
    <link rel="apple-touch-icon" href="./ToDo.png" />
    <title>ToDo:Lists and Tasks App</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="./static/css/tailwind.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer="defer" src="./static/js/main.4a82c912.js"></script>
</head>

<body>
    <img src="./ToDo.png" style="display: none;">
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="toast"
     class="fixed top-4 left-1/2 -translate-x-1/2 opacity-0 transition-all duration-300 bg-black text-white px-4 py-2 rounded flex items-center gap-2 z-50">
        <span id="toast-icon"></span>
        <span id="toast-msg"></span>
    </div>

    <div id="root"></div>

    <script>

        function installApp() {
    if (deferredPrompt) {
        deferredPrompt.prompt();
        deferredPrompt.userChoice.then(() => {
            deferredPrompt = null;
        });
    }
}

    let deferredPrompt;

window.addEventListener("beforeinstallprompt", e => {
    e.preventDefault();
    deferredPrompt = e;
    showToast("Install ToDo web app from your browser menu", "download");
});
    
    if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
            navigator.serviceWorker
                .register("./service-worker.js")
                .then(reg => console.log("Service Worker registered", reg))
                .catch(err => console.error("SW registration failed", err));
        });
    }

        function showToast(msg, iconName = "info") {
            const toast = document.getElementById('toast');
            const iconContainer = document.getElementById('toast-icon');
            const msgContainer = document.getElementById('toast-msg');
            
            // Set icon
            iconContainer.innerHTML = `<i data-lucide="${iconName}" class="w-4 h-4"></i>`;
            lucide.createIcons();
            
            msgContainer.textContent = msg;
            
            toast.style.opacity = '1';
            toast.style.transform = 'translate(-50%, 0)';
            
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translate(-50%, -10px)';
            }, 3000);
        }
</script>
</body>

</html>
